(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{U4CH:function(e,t,o){"use strict";o.r(t);var a=o("TsPW"),n={name:"addcoupon",data:function(){return{couponData:{couponName:"",couponAmount:"",usageLimit:"",whetherItCanBeSuperimposed:"",superimposedSheets:"",couponStartTime:"",couponEndTime:"",couponNumber:"",limitTheNumberOfSheets:"",sendingMethod:"",cronExpression:"",time:""},showTime:!1,showDate:!1,disBtn:!1,rules:{couponName:[{required:!0,message:"请输入优惠卷名称",trigger:"blur"}],couponAmount:[{required:!0,message:"请输入优惠卷金额",trigger:"blur"}],superimposedSheets:[{required:!0,message:"满多少元使用",trigger:"blur"}],couponNumber:[{required:!0,message:"请输入发放数量",trigger:"blur"}],limitTheNumberOfSheets:[{required:!0,message:"请输入每人领取份数",trigger:"blur"}],whetherItCanBeSuperimposed:[{required:!0,message:"请选择是否可以叠加使用",trigger:"change"}],sendingMethod:[{required:!0,message:"请选择发送方式",trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return e?1==t.couponData.sendingMethod&&""==t.couponData.time?(t.$message({type:"error",message:"请选择每周发放时间！"}),!1):3!=t.couponData.sendingMethod||""!=t.couponData.couponStartTime&&""!=t.couponData.couponEndTime?(t.disBtn=!0,void Object(a.p)(t.couponData).then(function(e){e.success?t.$message({type:"success",message:"添加优惠卷成功",onClose:function(){t.$router.push({path:"/coupon"})}}):t.disBtn=!1})):(t.$message({type:"error",message:"请选择优惠卷开始结束日期！"}),!1):(console.log("error submit!!"),t.disBtn=!1,!1)})},back:function(){this.$router.push({path:"/coupon"})},checkTime:function(e){1==this.couponData.sendingMethod&&(this.showTime=!0,this.showDate=!1),2==this.couponData.sendingMethod&&(this.showTime=!1,this.showDate=!1),3==this.couponData.sendingMethod&&(this.showDate=!0,this.showTime=!1)},checkDate:function(e){this.couponData.cronExpression="0 0 0 ? * "+e}}},s=(o("q2Tc"),o("KHd+")),r=Object(s.a)(n,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),o("el-breadcrumb-item",{attrs:{to:{path:"/coupon"}}},[e._v("优惠卷列表")]),e._v(" "),o("el-breadcrumb-item",[e._v("添加优惠卷")])],1),e._v(" "),o("div",{staticClass:"contentBody"},[o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form",{ref:"couponData",attrs:{rules:e.rules,model:e.couponData,"label-width":"140px"}},[o("el-form-item",{attrs:{label:"优惠卷名称",prop:"couponName"}},[o("el-input",{model:{value:e.couponData.couponName,callback:function(t){e.$set(e.couponData,"couponName",t)},expression:"couponData.couponName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"优惠卷金额",prop:"couponAmount"}},[o("el-input",{model:{value:e.couponData.couponAmount,callback:function(t){e.$set(e.couponData,"couponAmount",t)},expression:"couponData.couponAmount"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"满多少元使用",prop:"superimposedSheets"}},[o("el-input",{model:{value:e.couponData.superimposedSheets,callback:function(t){e.$set(e.couponData,"superimposedSheets",t)},expression:"couponData.superimposedSheets"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"发放数量",prop:"couponNumber"}},[o("el-input",{attrs:{placeholder:"输入0表示无限制"},model:{value:e.couponData.couponNumber,callback:function(t){e.$set(e.couponData,"couponNumber",t)},expression:"couponData.couponNumber"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"每人最大领取数",prop:"limitTheNumberOfSheets"}},[o("el-input",{model:{value:e.couponData.limitTheNumberOfSheets,callback:function(t){e.$set(e.couponData,"limitTheNumberOfSheets",t)},expression:"couponData.limitTheNumberOfSheets"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"是否可以叠加使用",prop:"whetherItCanBeSuperimposed"}},[o("el-select",{model:{value:e.couponData.whetherItCanBeSuperimposed,callback:function(t){e.$set(e.couponData,"whetherItCanBeSuperimposed",t)},expression:"couponData.whetherItCanBeSuperimposed"}},[o("el-option",{attrs:{label:"是",value:"0"}}),e._v(" "),o("el-option",{attrs:{label:"否",value:"1"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"发送方式",prop:"sendingMethod"}},[o("el-radio-group",{on:{change:e.checkTime},model:{value:e.couponData.sendingMethod,callback:function(t){e.$set(e.couponData,"sendingMethod",t)},expression:"couponData.sendingMethod"}},[o("el-radio",{attrs:{label:"1"}},[e._v("每周")]),e._v(" "),o("el-radio",{attrs:{label:"3"}},[e._v("自定义时间")])],1)],1),e._v(" "),e.showTime?o("el-form-item",{attrs:{label:"选择时间"}},[o("el-radio-group",{on:{change:e.checkDate},model:{value:e.couponData.time,callback:function(t){e.$set(e.couponData,"time",t)},expression:"couponData.time"}},[o("el-radio",{attrs:{label:"1"}},[e._v("星期一")]),e._v(" "),o("el-radio",{attrs:{label:"2"}},[e._v("星期二")]),e._v(" "),o("el-radio",{attrs:{label:"3"}},[e._v("星期三")]),e._v(" "),o("el-radio",{attrs:{label:"4"}},[e._v("星期四")]),e._v(" "),o("el-radio",{attrs:{label:"5"}},[e._v("星期五")]),e._v(" "),o("el-radio",{attrs:{label:"6"}},[e._v("星期六")]),e._v(" "),o("el-radio",{attrs:{label:"7"}},[e._v("星期日")])],1)],1):e._e(),e._v(" "),e.showDate?o("el-form-item",{attrs:{label:"活动时间"}},[o("el-col",{attrs:{span:11}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择开始日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.couponData.couponStartTime,callback:function(t){e.$set(e.couponData,"couponStartTime",t)},expression:"couponData.couponStartTime"}})],1),e._v(" "),o("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),e._v(" "),o("el-col",{attrs:{span:11}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.couponData.couponEndTime,callback:function(t){e.$set(e.couponData,"couponEndTime",t)},expression:"couponData.couponEndTime"}})],1)],1):e._e(),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",disabled:e.disBtn},on:{click:function(t){return e.submitForm("couponData")}}},[e._v("立即创建")]),e._v(" "),o("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1)],1)],1)],1)],1)},[],!1,null,"1fcf3dab",null);r.options.__file="addcoupon.vue";t.default=r.exports},q2Tc:function(e,t,o){"use strict";var a=o("y0og");o.n(a).a},y0og:function(e,t,o){}}]);