(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{"0zo/":function(e,t,n){"use strict";n.r(t);var a=n("gDS+"),o=n.n(a),l=n("TsPW"),i={name:"coupon",data:function(){return{param:{couponName:"",pageNo:1,pageSize:15},totalNum:0,couponData:[],dialogVisible:!1,couponDetail:""}},created:function(){this.getCoupon()},methods:{handleSizeChange:function(e){this.param.pageSize=e,this.getCoupon()},handleCurrentChange:function(e){this.param.pageNo=e,this.getCoupon()},getCoupon:function(){var e=this;Object(l.m)(this.param).then(function(t){200==t.status&&(e.couponData=t.data.items,e.totalNum=t.data.totalNum)})},addCoupon:function(){this.$router.push({path:"/addCoupon"})},onSearch:function(){this.getCoupon()},handClick:function(e,t){var n=this;if("edit"==t){var a=o()(e);sessionStorage.setItem("couponData",a),this.$router.push({path:"/editcoupon"})}"delete"==t&&Object(l.k)(e).then(function(e){e.success&&(n.$message({type:"success",message:"删除活动成功"}),n.getCoupon())}),"detail"==t&&(this.dialogVisible=!0,this.couponDetail=e),"close"==t&&Object(l.n)({sendingMethod:e.sendingMethod,couponValidTimeId:e.id}).then(function(e){e.success&&(n.$message({type:"success",message:"任务关闭成功"}),n.getCoupon())}),"start"==t&&Object(l.o)({sendingMethod:e.sendingMethod,couponValidTimeId:e.id}).then(function(e){e.success&&(n.$message({type:"success",message:"任务启用成功"}),n.getCoupon())})}}},s=(n("7c4k"),n("KHd+")),r=Object(s.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),n("el-breadcrumb-item",[e._v("优惠卷管理")])],1),e._v(" "),n("div",{staticClass:"contentBody"},[n("el-form",{staticClass:"demo-form-inline",attrs:{model:e.param,"label-width":"90px","label-position":"left"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:10}},[n("el-form-item",{attrs:{label:"优惠卷名称"}},[n("el-input",{attrs:{maxlength:200,autocomplete:"off",placeholder:"优惠卷名称",clearable:""},model:{value:e.param.couponName,callback:function(t){e.$set(e.param,"couponName",t)},expression:"param.couponName"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{"label-width":"0"}},[n("el-button",{attrs:{icon:"el-icon-search",circle:"","native-type":"submit"},nativeOn:{click:function(t){return t.preventDefault(),e.onSearch(t)}}}),e._v(" "),n("el-button",{attrs:{icon:"el-icon-plus",circle:""},on:{click:function(t){return e.addCoupon()}}})],1)],1)],1)],1),e._v(" "),n("el-table",{attrs:{border:"",data:e.couponData}},[n("el-table-column",{attrs:{type:"index",label:"序号","header-align":"center",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"优惠卷名称",align:"center",prop:"couponName","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"优惠卷金额",align:"center",prop:"couponAmount","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"满多少使用",align:"center",prop:"superimposedSheets","header-align":"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"发送方式",align:"center",prop:"sendingMethod","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.sendingMethod?n("span",[e._v("每周")]):e._e(),e._v(" "),2==t.row.sendingMethod?n("span",[e._v("每月")]):e._e(),e._v(" "),3==t.row.sendingMethod?n("span",[e._v("自定义时间")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态","header-align":"center",align:"center",prop:"activeStatus"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.activeStatus?n("span",[e._v("进行中")]):e._e(),e._v(" "),2==t.row.activeStatus?n("span",[e._v("已暂停")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作","header-align":"center",width:"440"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{icon:"el-icon-document",size:"mini"},on:{click:function(n){return e.handClick(t.row,"detail")}}},[e._v("详情")]),e._v(" "),1==t.row.sendingMethod?n("el-button",{attrs:{icon:"el-icon-lock",size:"mini",type:"danger"},on:{click:function(n){return e.handClick(t.row,"close")}}},[e._v("关闭")]):e._e(),e._v(" "),1==t.row.sendingMethod?n("el-button",{attrs:{icon:"el-icon-switch-button",size:"mini",type:"success"},on:{click:function(n){return e.handClick(t.row,"start")}}},[e._v("启用")]):e._e()]}}])})],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.param.pageNo,"page-sizes":[15,30,45,60],"page-size":e.param.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),n("el-dialog",{attrs:{title:"优惠卷详情",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left"}},[n("el-form-item",{attrs:{label:"优惠卷名称"}},[n("span",[e._v(e._s(e.couponDetail.couponName))])]),e._v(" "),n("el-form-item",{attrs:{label:"优惠卷金额"}},[n("span",[e._v(e._s(e.couponDetail.couponAmount))])]),e._v(" "),n("el-form-item",{attrs:{label:"满多少使用"}},[n("span",[e._v(e._s(e.couponDetail.superimposedSheets))])])],1),e._v(" "),n("el-table",{attrs:{border:"",data:e.couponDetail.couponValidTimeList}},[n("el-table-column",{attrs:{label:"序号",type:"index"}}),e._v(" "),n("el-table-column",{attrs:{label:"开始时间",prop:"couponStartTime"}}),e._v(" "),n("el-table-column",{attrs:{label:"结束时间",prop:"couponEndTime"}})],1)],1)],1)],1)},[],!1,null,"7706fddc",null);r.options.__file="coupon.vue";t.default=r.exports},"24Ks":function(e,t,n){},"7c4k":function(e,t,n){"use strict";var a=n("24Ks");n.n(a).a},"gDS+":function(e,t,n){e.exports={default:n("oh+g"),__esModule:!0}},"oh+g":function(e,t,n){var a=n("WEpk"),o=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}}}]);