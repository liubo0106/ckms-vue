(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"59Ym":function(t,e,a){},A6Le:function(t,e,a){"use strict";a.r(e);var i=a("TsPW"),o={name:"edit-out-stock-order",data:function(){return{tableData:null,typeBool:!1,logisticsInfo:!1,formLabelWidth:"80px",dialogFormVisible:!1,dialogTitle:"新增出库单明细",dialogForm:{standard:"",number:"",price:"",id:"",productInfoId:""},id:"",saveLoading:!1,editForm:{name:"",dateTime:"",totalNumber:"",totalPrice:"",remark:"",salesOrderIds:[],logisticsNo:"",logisticsId:""},rules:{name:[{required:!0,message:"请输入",trigger:"blur"}],salesOrderIds:[{required:!0,message:"请输入",trigger:"blur"}],dateTime:[{required:!0,message:"请输入",trigger:"blur"}]},headers:{sessionId:sessionStorage.getItem("sessionId")},purchaseList:[],LogisticsList:[],param:{pageSize:-1},param2:{pid:""},param3:{pageSize:-1,status:1},param4:{content:"",pageSize:-1},productList:[]}},methods:{changeProduct:function(t){var e;e=this.productList.find(function(e){return e.id===t}),this.dialogForm.standard=e.standard},handleClickDetail:function(t,e,a){var o=this;"delete"==a?o.$confirm("真的删除该行数据么, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.id};Object(i.N)(t).then(function(t){200==t.status?o.$message({type:"success",message:"删除成功!",duration:300,onClose:function(){o.getAjaxList(1)}}):o.$message({type:"error",message:t.msg})})}).catch(function(){o.$message({type:"info",message:"已取消删除"})}):"add"==a?o.addOrg("add",e):"edit"==a&&o.addOrg("edit",e)},addOrg:function(t,e){this.dialogFormVisible=!0,"add"==t?(this.dialogForm.standard="",this.dialogForm.number="",this.dialogForm.id="",this.dialogForm.price=0,this.dialogForm.productInfoId=""):(this.dialogForm.standard=e.standard,this.dialogForm.id=e.id,this.dialogForm.number=e.number,this.dialogForm.price=e.price,this.dialogForm.productInfoId=e.productInfoId)},dialogFormAdd:function(t){var e,a=this;e={id:this.dialogForm.id,standard:this.dialogForm.standard,number:this.dialogForm.number,price:this.dialogForm.price,productInfoId:this.dialogForm.productInfoId,outStockOrderId:a.id},this.$refs[t].validate(function(t){if(!t)return!1;a.saveLoading=!0,Object(i.Zc)(e).then(function(t){200==t.status?a.$message({type:"success",message:"操作成功!",duration:300,onClose:function(){a.saveLoading=!1,a.dialogFormVisible=!1,a.getAjaxList(1)}}):(a.saveLoading=!1,a.$message({type:"error",message:t.msg}))})})},getAjaxList:function(t){var e=this;Object(i.Hb)(e.param2).then(function(a){e.tableData=[];var i=a.data;if(i&&i.length>0){e.tableData=i;for(var o=0,r=0,l=0;l<e.tableData.length;l++)o+=e.tableData[l].price*e.tableData[l].number,r+=e.tableData[l].number;e.editForm.totalPrice=o,e.editForm.totalNumber=r,1==t&&e.submitForm("editForm")}else e.tableData=[]})},requestClientInfo:function(){var t=this,e=this;Object(i.ue)({id:this.id}).then(function(a){if(t.logisticsInfo=!0,200==a.status){var i=a.data;i&&(e.editForm.name=i.name,e.editForm.dateTime=i.dateTime,e.editForm.totalNumber=i.totalNumber,e.editForm.totalPrice=i.totalPrice,e.editForm.remark=i.remark,e.editForm.logisticsId=i.logisticsId,e.editForm.plateNumber=i.logistics.plateNumber,e.editForm.contact=i.logistics.contact,e.editForm.phone=i.logistics.phone,e.editForm.company=i.logistics.company,e.editForm.logisticsNo=i.logisticsNo)}else t.$message({message:"请求异常",type:"error"})})},goBack:function(){this.$router.push({path:"/storereturn"})},submitForm:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(!t)return!1;a.saveLoading=!0;var o={id:a.id,name:a.editForm.name,dateTime:a.editForm.dateTime,totalNumber:a.editForm.totalNumber,totalPrice:a.editForm.totalPrice,remark:a.editForm.remark,logisticsNo:a.editForm.logisticsNo,salesOrderIds:a.editForm.salesOrderIds.toString(),logisticsId:a.editForm.logisticsId.toString()};Object(i.ad)(o).then(function(t){e.$message({type:"success",message:"操作成功!",duration:300,onClose:function(){sessionStorage.setItem("outId",t.data.id),a.id=t.data.id,a.param2.pid=t.data.id,a.requestClientInfo(),a.getAjaxList(2),a.saveLoading=!1,a.typeBool=!0}})})})},getAjaxPList:function(){var t=this;Object(i.Bc)(t.param3).then(function(e){var a=e.data.items;a&&a.length>0?t.purchaseList=a:t.purchaseList=[]})},getAjaxLogisticsList:function(){var t=this;Object(i.Ed)(t.param4).then(function(e){var a=e.data.items;a&&a.length>0?t.LogisticsList=a:t.LogisticsList=[]})},getAjaxProduct:function(){var t=this;Object(i.Md)(t.param).then(function(e){if(200==e.status){var a=e.data.items;a&&a.length>0?t.productList=a:t.productList=[]}})}},beforeMount:function(){var t=sessionStorage.getItem("storeReturnId");t&&(this.id=t,this.param2.pid=t,this.typeBool=!0,this.requestClientInfo(),this.getAjaxList(2)),this.getAjaxPList(),this.getAjaxProduct(),this.getAjaxLogisticsList()}},r=(a("t6c9"),a("KHd+")),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/storereturn"}}},[t._v("门店退货管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("详情")])],1),t._v(" "),a("div",{staticClass:"contentBody"},[a("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:t.editForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:function(e){return t.goBack()}}},[t._v("返回")])],1),t._v(" "),a("el-form-item",{attrs:{label:"出库单名称",prop:"name"}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入",maxlength:15},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"总量"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.totalNumber,callback:function(e){t.$set(t.editForm,"totalNumber",e)},expression:"editForm.totalNumber"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"物流电话"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.phone,callback:function(e){t.$set(t.editForm,"phone",e)},expression:"editForm.phone"}})],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{width:"316px"},attrs:{label:" 物流车牌号"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:t.editForm.logisticsId,callback:function(e){t.$set(t.editForm,"logisticsId",e)},expression:"editForm.logisticsId"}},t._l(t.LogisticsList,function(t){return a("el-option",{attrs:{label:t.plateNumber,value:t.id}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"物流单号"}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入",maxlength:200},model:{value:t.editForm.logisticsNo,callback:function(e){t.$set(t.editForm,"logisticsNo",e)},expression:"editForm.logisticsNo"}})],1)],1)],1),t._v(" "),t.logisticsInfo?a("el-row",[a("el-col",{attrs:{span:8}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"物流公司名称"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.company,callback:function(e){t.$set(t.editForm,"company",e)},expression:"editForm.company"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"物流联系人"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.contact,callback:function(e){t.$set(t.editForm,"contact",e)},expression:"editForm.contact"}})],1)],1)],1):t._e(),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"出库日期",prop:"dateTime"}},[a("el-date-picker",{attrs:{disabled:"",type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.editForm.dateTime,callback:function(e){t.$set(t.editForm,"dateTime",e)},expression:"editForm.dateTime"}})],1)],1)],1),t._v(" "),t.logisticsInfo?a("el-row",[a("el-col",{attrs:{span:8}}),t._v(" "),a("el-col",{attrs:{span:8}})],1):t._e(),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{disabled:"",type:"textarea",placeholder:"请输入",maxlength:200},model:{value:t.editForm.remark,callback:function(e){t.$set(t.editForm,"remark",e)},expression:"editForm.remark"}})],1)],1),t._v(" "),t.id?a("div",{staticClass:"contentBody"},[a("el-form",{staticClass:"demo-form-inline",attrs:{"label-width":"60px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{"label-width":"0"}})],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{align:"center","header-align":"center",type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"serialNo",label:"原料编号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"name",label:"原料名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"standard",label:"单位"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","header-align":"center",prop:"number",label:"数量",width:"140"}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm,rules:t.rules}},[a("el-form-item",{attrs:{label:"原料名称","label-width":t.formLabelWidth,prop:"productInfoId"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.changeProduct},model:{value:t.dialogForm.productInfoId,callback:function(e){t.$set(t.dialogForm,"productInfoId",e)},expression:"dialogForm.productInfoId"}},t._l(t.productList,function(t){return a("el-option",{attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"单位","label-width":t.formLabelWidth,prop:"standard"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.dialogForm.standard,callback:function(e){t.$set(t.dialogForm,"standard",e)},expression:"dialogForm.standard"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"数量","label-width":t.formLabelWidth,prop:"number"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.dialogForm.number,callback:function(e){t.$set(t.dialogForm,"number",e)},expression:"dialogForm.number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"单价","label-width":t.formLabelWidth,prop:"price"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.dialogForm.price,callback:function(e){t.$set(t.dialogForm,"price",e)},expression:"dialogForm.price"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.saveLoading},on:{click:function(e){return t.dialogFormAdd("dialogForm")}}},[t._v("确 定")])],1)],1)],1):t._e()],1)],1)},[],!1,null,"3899a43a",null);l.options.__file="detailStoreReturn.vue";e.default=l.exports},t6c9:function(t,e,a){"use strict";var i=a("59Ym");a.n(i).a}}]);