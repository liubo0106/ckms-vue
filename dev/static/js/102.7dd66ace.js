(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"2qQR":function(e,o,t){"use strict";t.r(o);var a=t("TsPW"),n={name:"addcoupon",data:function(){return{couponData:{id:"",couponName:"",couponAmount:"",usageLimit:"",whetherItCanBeSuperimposed:"",superimposedSheets:"",couponStartTime:"",couponEndTime:"",couponNumber:"",limitTheNumberOfSheets:"",sendingMethod:"",cronExpression:"",time:"",couponSetId:""},showTime:!1,showDate:!1,disBtn:!1,rules:{couponName:[{required:!0,message:"请输入优惠卷名称",trigger:"blur"}],couponAmount:[{required:!0,message:"请输入优惠卷金额",trigger:"blur"}],superimposedSheets:[{required:!0,message:"满多少元使用",trigger:"blur"}],couponNumber:[{required:!0,message:"请输入发放数量",trigger:"blur"}],limitTheNumberOfSheets:[{required:!0,message:"请输入每人领取份数",trigger:"blur"}],whetherItCanBeSuperimposed:[{required:!0,message:"请选择是否可以叠加使用",trigger:"change"}],sendingMethod:[{required:!0,message:"请选择发送方式",trigger:"change"}]}}},created:function(){this.getData(),this.checkTime()},methods:{submitForm:function(e){var o=this;this.$refs[e].validate(function(e){return e?1==o.couponData.sendingMethod&&""==o.couponData.time?(o.$message({type:"error",message:"请选择每周发放时间！"}),!1):3!=o.couponData.sendingMethod||""!=o.couponData.couponStartTime&&""!=o.couponData.couponEndTime?(o.disBtn=!0,void Object(a.q)(o.couponData).then(function(e){e.success?o.$message({type:"success",message:"添加优惠卷成功",onClose:function(){o.$router.push({path:"/coupon"})}}):o.disBtn=!1})):(o.$message({type:"error",message:"请选择优惠卷开始结束日期！"}),!1):(console.log("error submit!!"),o.disBtn=!1,!1)})},back:function(){this.$router.push({path:"/coupon"})},checkTime:function(e){1==this.couponData.sendingMethod&&(this.showTime=!0,this.showDate=!1),2==this.couponData.sendingMethod&&(this.showTime=!1,this.showDate=!1),3==this.couponData.sendingMethod&&(this.showDate=!0,this.showTime=!1)},checkDate:function(e){this.couponData.cronExpression="0 0 0 ? * "+e},getData:function(){var e=JSON.parse(sessionStorage.getItem("couponData"));this.couponData.couponName=e.couponName,this.couponData.couponAmount=e.couponAmount,this.couponData.usageLimit=e.usageLimit,this.couponData.whetherItCanBeSuperimposed=e.whetherItCanBeSuperimposed,this.couponData.superimposedSheets=e.superimposedSheets,this.couponData.couponStartTime=e.couponStartTime,this.couponData.couponEndTime=e.couponEndTime,this.couponData.couponNumber=e.couponNumber,this.couponData.limitTheNumberOfSheets=e.limitTheNumberOfSheets,this.couponData.sendingMethod=e.sendingMethod,this.couponData.cronExpression=e.cronExpression,this.couponData.couponSetId=e.couponValidTimeList[0].id,this.couponData.couponId=e.id,console.log(this.couponData.sendingMethod)}}},s=(t("jPED"),t("KHd+")),i=Object(s.a)(n,function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("section",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),t("el-breadcrumb-item",{attrs:{to:{path:"/coupon"}}},[e._v("优惠卷列表")]),e._v(" "),t("el-breadcrumb-item",[e._v("编辑优惠卷")])],1),e._v(" "),t("div",{staticClass:"contentBody"},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-form",{ref:"couponData",attrs:{rules:e.rules,model:e.couponData,"label-width":"140px"}},[t("el-form-item",{attrs:{label:"优惠卷名称",prop:"couponName"}},[t("el-input",{model:{value:e.couponData.couponName,callback:function(o){e.$set(e.couponData,"couponName",o)},expression:"couponData.couponName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"优惠卷金额",prop:"couponAmount"}},[t("el-input",{model:{value:e.couponData.couponAmount,callback:function(o){e.$set(e.couponData,"couponAmount",o)},expression:"couponData.couponAmount"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"满多少元使用",prop:"superimposedSheets"}},[t("el-input",{model:{value:e.couponData.superimposedSheets,callback:function(o){e.$set(e.couponData,"superimposedSheets",o)},expression:"couponData.superimposedSheets"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"发放数量",prop:"couponNumber"}},[t("el-input",{attrs:{placeholder:"输入0表示无限制"},model:{value:e.couponData.couponNumber,callback:function(o){e.$set(e.couponData,"couponNumber",o)},expression:"couponData.couponNumber"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"每人最大领取数",prop:"limitTheNumberOfSheets"}},[t("el-input",{model:{value:e.couponData.limitTheNumberOfSheets,callback:function(o){e.$set(e.couponData,"limitTheNumberOfSheets",o)},expression:"couponData.limitTheNumberOfSheets"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"是否可以叠加使用",prop:"whetherItCanBeSuperimposed"}},[t("el-select",{model:{value:e.couponData.whetherItCanBeSuperimposed,callback:function(o){e.$set(e.couponData,"whetherItCanBeSuperimposed",o)},expression:"couponData.whetherItCanBeSuperimposed"}},[t("el-option",{attrs:{label:"是",value:0}}),e._v(" "),t("el-option",{attrs:{label:"否",value:1}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"发送方式",prop:"sendingMethod"}},[t("el-radio-group",{on:{change:e.checkTime},model:{value:e.couponData.sendingMethod,callback:function(o){e.$set(e.couponData,"sendingMethod",o)},expression:"couponData.sendingMethod"}},[t("el-radio",{attrs:{label:1}},[e._v("每周")]),e._v(" "),t("el-radio",{attrs:{label:3}},[e._v("自定义时间")])],1)],1),e._v(" "),e.showTime?t("el-form-item",{attrs:{label:"选择时间"}},[t("el-radio-group",{on:{change:e.checkDate},model:{value:e.couponData.time,callback:function(o){e.$set(e.couponData,"time",o)},expression:"couponData.time"}},[t("el-radio",{attrs:{label:1}},[e._v("星期一")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("星期二")]),e._v(" "),t("el-radio",{attrs:{label:3}},[e._v("星期三")]),e._v(" "),t("el-radio",{attrs:{label:4}},[e._v("星期四")]),e._v(" "),t("el-radio",{attrs:{label:5}},[e._v("星期五")]),e._v(" "),t("el-radio",{attrs:{label:6}},[e._v("星期六")]),e._v(" "),t("el-radio",{attrs:{label:7}},[e._v("星期日")])],1)],1):e._e(),e._v(" "),e.showDate?t("el-form-item",{attrs:{label:"活动时间"}},[t("el-col",{attrs:{span:11}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择开始日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.couponData.couponStartTime,callback:function(o){e.$set(e.couponData,"couponStartTime",o)},expression:"couponData.couponStartTime"}})],1),e._v(" "),t("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),e._v(" "),t("el-col",{attrs:{span:11}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.couponData.couponEndTime,callback:function(o){e.$set(e.couponData,"couponEndTime",o)},expression:"couponData.couponEndTime"}})],1)],1):e._e(),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:e.disBtn},on:{click:function(o){return e.submitForm("couponData")}}},[e._v("立即创建")]),e._v(" "),t("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1)],1)],1)],1)],1)},[],!1,null,"3c960d7b",null);i.options.__file="editcoupon.vue";o.default=i.exports},XAQn:function(e,o,t){},jPED:function(e,o,t){"use strict";var a=t("XAQn");t.n(a).a}}]);