(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"8Xkh":function(e,t,r){"use strict";var n=r("kHr/");r.n(n).a},WWqH:function(e,t,r){"use strict";r.r(t);var n=r("TsPW"),o={name:"edit-menu-manage",data:function(){return{saveLoading:!1,menuId:"",editForm:{num:0,url:"",name:"",parentId:[],icon:"",path:"",code:""},menuList:[],props:{value:"id",label:"name"},rules:{code:[{required:!0,message:"请输入菜单编码",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字",trigger:"blur"}],name:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字",trigger:"blur"}],num:[{required:!0,message:"请输入序列",trigger:"blur"},{type:"number",message:"序列必须为数字",trigger:"blur"}]}}},methods:{getAjaxMenuInfo:function(){var e=this,t=this;Object(n.Tb)({id:this.menuId}).then(function(r){var n=r.data;n?(t.editForm.name=n.name,t.editForm.code=n.code,t.editForm.num=n.num,t.editForm.url=n.url,t.editForm.path=n.path,t.editForm.icon=n.icon,t.editForm.parentId.push(n.parentId)):e.$message({message:"请求异常",type:"error"})}).then(function(e){t.getAjaxAllMenu()})},getAjaxAllMenu:function(){var e=this,t=this;Object(n.a)().then(function(r){var n=r.data;n&&n.length>0?t.menuList=n:e.$message({message:"请求异常",type:"error"})})},goCopy:function(){window.open("https://element.faas.ele.me/#/zh-CN/component/icon")},goBack:function(){this.$router.push({path:"/menu"})},submitForm:function(e){var t=this,r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.saveLoading=!0;var o=r.editForm.parentId,a={code:r.editForm.code,name:r.editForm.name,id:r.menuId,num:r.editForm.num,url:r.editForm.url,parentId:o.length>0?o[o.length-1].toString():0,icon:r.editForm.icon,path:r.editForm.path,type:"M"};Object(n.Uc)(a).then(function(e){"200"==e.status?t.$message({type:"success",message:"操作成功!",duration:300,onClose:function(){r.goBack(),r.saveLoading=!1}}):t.$message({type:"error",message:e.msg,duration:3e3,onClose:function(){r.saveLoading=!1}})})})}},beforeMount:function(){var e=sessionStorage.getItem("menuId");this.menuId=e,e?this.getAjaxMenuInfo():this.getAjaxAllMenu()}},a=(r("8Xkh"),r("KHd+")),i=Object(a.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",[e._v("权限管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{path:"/menu"}}},[e._v("菜单管理")]),e._v(" "),r("el-breadcrumb-item",[e._v(e._s(""==e.menuId?"添加菜单":"编辑菜单"))])],1),e._v(" "),r("div",{staticClass:"contentBody"},[r("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"父节点"}},[[r("el-cascader",{attrs:{clearable:!0,props:e.props,placeholder:"请选择父节点","change-on-select":"",options:e.menuList,"show-all-levels":!1},model:{value:e.editForm.parentId,callback:function(t){e.$set(e.editForm,"parentId",t)},expression:"editForm.parentId"}})]],2),e._v(" "),r("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:15},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"前台路由",prop:"path"}},[r("el-input",{attrs:{placeholder:"请输入/path",maxlength:50},model:{value:e.editForm.path,callback:function(t){e.$set(e.editForm,"path",t)},expression:"editForm.path"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"菜单编码",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:50},model:{value:e.editForm.code,callback:function(t){e.$set(e.editForm,"code",t)},expression:"editForm.code"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"URL",prop:"url"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:200},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"菜单图标",prop:"icon"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:200},model:{value:e.editForm.icon,callback:function(t){e.$set(e.editForm,"icon",t)},expression:"editForm.icon"}},[r("template",{slot:"append"},[r("el-button",{attrs:{type:"text"},on:{click:e.goCopy}},[e._v("去复制")])],1)],2)],1),e._v(" "),r("el-form-item",{attrs:{label:"序列",prop:"num"}},[r("el-input",{attrs:{type:"age",placeholder:"请输入",maxlength:2},model:{value:e.editForm.num,callback:function(t){e.$set(e.editForm,"num",e._n(t))},expression:"editForm.num"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){return e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)},[],!1,null,"eb94e0f6",null);i.options.__file="editMenu.vue";t.default=i.exports},"kHr/":function(e,t,r){}}]);