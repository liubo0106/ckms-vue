(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{H1oa:function(e,a,t){"use strict";t.r(a);var r=t("TsPW"),n={name:"user-manage",data:function(){return{searchForm:{name:"",serialNo:""},tableData:null,param:{name:"",pageNo:1,pageSize:15,categoryId:"",checkChild:"all",serialNo:"",isDelete:1},totalNum:0,orgTreeData:[],defaultProps:{children:"children",label:"name"},checkNodeKey:"",pathIds:""}},methods:{tableRowClassName:function(e){var a=e.row;e.rowIndex;return 1==a.isWarning&&a.stock<=a.safeStock?"warning-row":""},handleSizeChange:function(e){var a=this;a.param.pageSize=e,Object(r.Dd)(a.param).then(function(e){if(200==e.status){var t=e.data.items;t&&t.length>0?(a.tableData=t,a.totalNum=parseInt(e.data.totalNum)):(a.tableData=[],a.totalNum=0)}})},indexMethod:function(e){return(this.param.pageNo-1)*this.param.pageSize+e+1},handleNodeClick:function(e){this.searchForm.name="",this.searchForm.serialNo="",this.param.name="",this.param.serialNo="",this.param.categoryId="","0"==e.id||(this.param.categoryId=e.id),this.param.pageNo=1,this.getAjaxList(),this.checkNodeKey=e.id,sessionStorage.setItem("categoryId",this.param.categoryId)},onSearch:function(){this.param.pageNo=1,this.param.serialNo=this.searchForm.serialNo,this.param.name=this.searchForm.name,this.getAjaxList()},handleCurrentChange:function(e){this.param.pageNo=e,this.getAjaxList()},getAjaxList:function(){var e=this,a=this;Object(r.Dd)(a.param).then(function(t){if(200==t.status){var r=t.data.items;if(r&&r.length>0){a.tableData=r,a.totalNum=parseInt(t.data.totalNum),e.tableData.forEach(function(a){e.$set(a,"totolPrice",0)});for(var n=0;n<e.tableData.length;n++)e.tableData[n].totolPrice=e.tableData[n].stock*e.tableData[n].costPrice}else a.tableData=[],a.totalNum=0}})},getTreeAjaxList:function(){var e=this;Object(r.Ld)({}).then(function(a){if(200==a.status){var t=a.data;t&&t.length>0?e.orgTreeData=t:e.orgTreeData=[]}})}},filters:{substr:function(e){if(null!=e)return e.toFixed(2)}},beforeMount:function(){var e=sessionStorage.getItem("categoryId");e?(this.param.categoryId=e,this.checkNodeKey=e):this.checkNodeKey="",this.getAjaxList(),this.getTreeAjaxList()}},l=(t("dC2D"),t("KHd+")),o=Object(l.a)(n,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),t("el-breadcrumb-item",[e._v("厨房库存")])],1),e._v(" "),t("div",{staticClass:"contentBody"},[t("el-container",[t("el-aside",[t("el-tree",{attrs:{"highlight-current":!0,"node-key":"id","default-expand-all":"",data:e.orgTreeData,props:e.defaultProps,"current-node-key":e.checkNodeKey,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),t("el-main",[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"80px","label-position":"left"}},[t("el-form-item",{attrs:{label:"原料编号"}},[t("el-input",{attrs:{maxlength:200,autocomplete:"off",placeholder:"原料编号",clearable:""},model:{value:e.searchForm.serialNo,callback:function(a){e.$set(e.searchForm,"serialNo",a)},expression:"searchForm.serialNo "}})],1),e._v(" "),t("el-form-item",{attrs:{label:"原料名称"}},[t("el-input",{attrs:{maxlength:200,autocomplete:"off",placeholder:"原料名称",clearable:""},model:{value:e.searchForm.name,callback:function(a){e.$set(e.searchForm,"name",a)},expression:"searchForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{"label-width":"0"}},[t("el-button",{attrs:{icon:"el-icon-search",circle:"","native-type":"submit"},nativeOn:{click:function(a){return a.preventDefault(),e.onSearch(a)}}})],1)],1),e._v(" "),t("el-table",{attrs:{data:e.tableData,border:"","row-class-name":e.tableRowClassName}},[t("el-table-column",{attrs:{align:"center","header-align":"center",type:"index",index:e.indexMethod,label:"行号",width:"80"}}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"serialNo",label:"原料编号",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"name",label:"原料名称"}}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"stock",label:"库存量",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"price",label:"单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("substr")(a.row.price)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"costPrice",label:"成本价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("substr")(a.row.costPrice)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"totolPrice",label:"总价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("substr")(a.row.totolPrice)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"stock",label:"库存量",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"standard",label:"单位",width:"120"}}),e._v(" "),t("el-table-column",{attrs:{align:"center","header-align":"center",prop:"createUser",label:"操作人"}})],1),e._v(" "),t("el-pagination",{attrs:{"current-page":e.param.pageNo,"page-sizes":[15,30,45,60],"page-size":e.param.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)},[],!1,null,null,null);o.options.__file="kitchenRaw.vue";a.default=o.exports},RrtJ:function(e,a,t){},dC2D:function(e,a,t){"use strict";var r=t("RrtJ");t.n(r).a}}]);