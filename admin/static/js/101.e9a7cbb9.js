(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{"+lHM":function(e,t,a){},"LC+Y":function(e,t,a){"use strict";var o=a("+lHM");a.n(o).a},U4CH:function(e,t,a){"use strict";a.r(t);var o=a("TsPW"),n={name:"addcoupon",data:function(){return{couponData:{couponName:"",couponAmount:"",usageLimit:"",whetherItCanBeSuperimposed:"",superimposedSheets:"",couponStartTime:"",couponEndTime:"",couponNumber:"",limitTheNumberOfSheets:"",sendingMethod:"",cronExpression:"",time:""},showTime:!1,dialogVisible:!1,showDate:!1,disBtn:!1,activeName:sessionStorage.getItem("activeName"),rules:{couponName:[{required:!0,message:"请输入优惠卷名称",trigger:"blur"}],couponAmount:[{required:!0,message:"请输入优惠卷金额",trigger:"blur"}],couponNumber:[{required:!0,message:"请输入发放数量",trigger:"blur"}],limitTheNumberOfSheets:[{required:!0,message:"请输入每人领取份数",trigger:"blur"}],whetherItCanBeSuperimposed:[{required:!0,message:"请选择是否可以叠加使用",trigger:"change"}],sendingMethod:[{required:!0,message:"请选择发送方式",trigger:"change"}]},goodsData:{pageSize:15,pageNo:1,status:1,name:"",isDelete:1},subGoodsData:{couponName:"",id:"",couponAmount:""},goodsId:"",totalNum:0,tableData:[]}},created:function(){this.getGoodsList()},methods:{getGoodsPage:function(){var e=this;Object(o.Gd)(this.goodsData).then(function(t){var a=t.data.items;a&&a.length>0?(e.tableData=a,e.totalNum=parseInt(t.data.totalNum)):(e.tableData=[],e.totalNum=0)})},checkGoodsType:function(e){this.subGoodsData.couponName=e.name,this.subGoodsData.couponAmount=e.price,this.subGoodsData.id=e.id},subGoods:function(){var e=this;Object(o.qb)(this.subGoodsData).then(function(t){200==t.status?e.$message({type:"success",message:"保存成功",onClose:function(){e.$router.push({path:"/coupon"})}}):e.$message({type:"error",message:t.msg})})},onSearch:function(){this.getGoodsPage()},checkGoods:function(){this.dialogVisible=!0,this.getGoodsPage()},handleSizeChange:function(e){this.goodsData.pageSize=e,this.getGoodsPage()},handleCurrentChange:function(e){this.goodsData.pageNo=e,this.getGoodsPage()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){return e?1==t.couponData.sendingMethod&&""==t.couponData.time?(t.$message({type:"error",message:"请选择每周发放时间！"}),!1):3!=t.couponData.sendingMethod||""!=t.couponData.couponStartTime&&""!=t.couponData.couponEndTime?(t.disBtn=!0,void Object(o.p)(t.couponData).then(function(e){e.success?t.$message({type:"success",message:"添加优惠卷成功",onClose:function(){t.$router.push({path:"/coupon"})}}):t.disBtn=!1})):(t.$message({type:"error",message:"请选择优惠卷开始结束日期！"}),!1):(console.log("error submit!!"),t.disBtn=!1,!1)})},back:function(){this.$router.push({path:"/coupon"})},checkTime:function(e){1==this.couponData.sendingMethod&&(this.showTime=!0,this.showDate=!1),2==this.couponData.sendingMethod&&(this.showTime=!1,this.showDate=!1),3==this.couponData.sendingMethod&&(this.showDate=!0,this.showTime=!1)},checkDate:function(e){this.couponData.cronExpression="0 0 0 ? * "+e}}},s=(a("LC+Y"),a("KHd+")),i=Object(s.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/coupon"}}},[e._v("优惠卷列表")]),e._v(" "),a("el-breadcrumb-item",[e._v("添加优惠卷")])],1),e._v(" "),a("div",{staticClass:"contentBody"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"优惠卷设置",name:"first"}},[a("el-row",{staticStyle:{"margin-top":"20px"}},[a("el-col",{attrs:{span:20}},[a("el-form",{ref:"couponData",attrs:{rules:e.rules,model:e.couponData,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"优惠卷名称",prop:"couponName"}},[a("el-input",{model:{value:e.couponData.couponName,callback:function(t){e.$set(e.couponData,"couponName",t)},expression:"couponData.couponName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"优惠卷金额",prop:"couponAmount"}},[a("el-input",{model:{value:e.couponData.couponAmount,callback:function(t){e.$set(e.couponData,"couponAmount",t)},expression:"couponData.couponAmount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发放数量",prop:"couponNumber"}},[a("el-input",{attrs:{placeholder:"输入0表示无限制"},model:{value:e.couponData.couponNumber,callback:function(t){e.$set(e.couponData,"couponNumber",t)},expression:"couponData.couponNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"每人最大领取数",prop:"limitTheNumberOfSheets"}},[a("el-input",{model:{value:e.couponData.limitTheNumberOfSheets,callback:function(t){e.$set(e.couponData,"limitTheNumberOfSheets",t)},expression:"couponData.limitTheNumberOfSheets"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否可以叠加使用",prop:"whetherItCanBeSuperimposed"}},[a("el-select",{model:{value:e.couponData.whetherItCanBeSuperimposed,callback:function(t){e.$set(e.couponData,"whetherItCanBeSuperimposed",t)},expression:"couponData.whetherItCanBeSuperimposed"}},[a("el-option",{attrs:{label:"是",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发送方式",prop:"sendingMethod"}},[a("el-radio-group",{on:{change:e.checkTime},model:{value:e.couponData.sendingMethod,callback:function(t){e.$set(e.couponData,"sendingMethod",t)},expression:"couponData.sendingMethod"}},[a("el-radio",{attrs:{label:"1"}},[e._v("每周")])],1)],1),e._v(" "),e.showTime?a("el-form-item",{attrs:{label:"选择时间"}},[a("el-radio-group",{on:{change:e.checkDate},model:{value:e.couponData.time,callback:function(t){e.$set(e.couponData,"time",t)},expression:"couponData.time"}},[a("el-radio",{attrs:{label:"1"}},[e._v("星期一")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("星期二")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("星期三")]),e._v(" "),a("el-radio",{attrs:{label:"4"}},[e._v("星期四")]),e._v(" "),a("el-radio",{attrs:{label:"5"}},[e._v("星期五")]),e._v(" "),a("el-radio",{attrs:{label:"6"}},[e._v("星期六")]),e._v(" "),a("el-radio",{attrs:{label:"7"}},[e._v("星期日")])],1)],1):e._e(),e._v(" "),e.showDate?a("el-form-item",{attrs:{label:"活动时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择开始日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.couponData.couponStartTime,callback:function(t){e.$set(e.couponData,"couponStartTime",t)},expression:"couponData.couponStartTime"}})],1),e._v(" "),a("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.couponData.couponEndTime,callback:function(t){e.$set(e.couponData,"couponEndTime",t)},expression:"couponData.couponEndTime"}})],1)],1):e._e(),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.disBtn},on:{click:function(t){return e.submitForm("couponData")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:e.back}},[e._v("取消")])],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择菜品",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{attrs:{placeholder:"商品名称"},model:{value:e.goodsData.name,callback:function(t){e.$set(e.goodsData,"name",t)},expression:"goodsData.name"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",circle:"","native-type":"submit"},nativeOn:{click:function(t){return t.preventDefault(),e.onSearch(t)}}})],1)],1),e._v(" "),a("el-table",{attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名称","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"typeName","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"菜品种类","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.kind?a("span",[e._v("其他")]):e._e(),e._v(" "),1==t.row.kind?a("span",[e._v("炒锅涮锅")]):e._e(),e._v(" "),2==t.row.kind?a("span",[e._v("烧烤")]):e._e(),e._v(" "),3==t.row.kind?a("span",[e._v("凉菜")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},on:{change:function(a){return e.checkGoodsType(t.row)}},model:{value:e.goodsId,callback:function(t){e.goodsId=t},expression:"goodsId"}},[e._v("选择菜品")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.goodsData.pageNo,"page-sizes":[15,30,45,60],"page-size":e.goodsData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 认 选 择")])],1)],1)],1)},[],!1,null,"79dbc14a",null);i.options.__file="addcoupon.vue";t.default=i.exports}}]);