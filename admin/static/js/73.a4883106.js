(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{HlQJ:function(e,t,r){"use strict";var o=r("wYhU");r.n(o).a},iOU0:function(e,t,r){"use strict";r.r(t);var o=r("TsPW"),a={name:"edit-user-manage",data:function(){var e=sessionStorage.getItem("customerId"),t=sessionStorage.getItem("customerName");"null"==e&&(e="-");return{flag:sessionStorage.getItem("flag"),id:"",disabled:!1,disabled2:!1,saveLoading:!1,customerList:[],editForm:{name:"",phone:"",amount:"",discount:"",level:"",customerName:t,wechat:"",remark:"",customerId:e},ceshi:"",checkAll:!1,rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入电话",trigger:"blur"},{validator:function(e,t,r){""===t?r(new Error("请输入手机号")):/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(t)?r():r(new Error("请输入正确的手机号"))},trigger:"blur"}]},param:{pageNo:1,pageSize:0,customerId:e},headers:{sessionId:sessionStorage.getItem("sessionId")}}},methods:{changeStore:function(e){var t;t=this.customerList.find(function(t){return t.id===e}),this.editForm.customerName=t.name},requestSupplierInfo:function(){var e=this,t=this;Object(o.Wb)({id:this.id}).then(function(r){if(200==r.status){e.disabled=!e.disabled;var o=r.data;o&&(t.editForm.name=o.name,t.editForm.phone=o.phone,t.editForm.amount=o.amount,t.editForm.discount=o.discount,t.editForm.level=o.level,t.editForm.customerName=o.customerName,t.editForm.customerId=o.customerId,t.editForm.wechat=o.wechat,t.editForm.remark=o.remark)}else e.$message({message:"请求异常",type:"error"})})},getAjaxSupplier:function(){var e=this;Object(o.zd)(e.param).then(function(t){var r=t.data.items;r&&r.length>0?e.customerList=r:e.customerList=[]})},goBack:function(){this.$router.push({path:"/memberManage"})},submitForm:function(e){var t=this,r=this;this.$refs[e].validate(function(e){if(!e)return!1;r.saveLoading=!0,"store"!=t.flag&&(r.editForm.customerName=r.editForm.customerName);var a={name:r.editForm.name,phone:r.editForm.phone,amount:r.editForm.amount,discount:r.editForm.discount,level:r.editForm.level,customerName:r.editForm.customerName,customerId:r.editForm.customerId,wechat:r.editForm.wechat,remark:r.editForm.remark};Object(o.Yc)(a).then(function(e){if(400==e.status)return t.$message({type:"error",message:e.msg,duration:1e3}),r.saveLoading=!1,!1;t.$message({type:"success",message:"操作成功!",duration:300,onClose:function(){r.goBack(),r.saveLoading=!1}})})})}},beforeMount:function(){var e=sessionStorage.getItem("id");e&&(this.id=e,this.requestSupplierInfo()),this.getAjaxSupplier(),"store"==this.flag&&(this.disabled2=!0)}},s=(r("HlQJ"),r("KHd+")),i=Object(s.a)(a,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",[e._v("会员管理")]),e._v(" "),r("el-breadcrumb-item",[e._v(e._s(""==e.id?"新增":"编辑"))])],1),e._v(" "),r("div",{staticClass:"contentBody"},[r("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"100px"}},[r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{staticStyle:{width:"360px"},attrs:{label:"姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:25,disabled:e.disabled},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{staticStyle:{width:"360px"},attrs:{label:"电话",prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:11},model:{value:e.editForm.phone,callback:function(t){e.$set(e.editForm,"phone",t)},expression:"editForm.phone"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{staticStyle:{width:"360px"},attrs:{label:"金额",prop:"amount"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:25,disabled:""},model:{value:e.editForm.amount,callback:function(t){e.$set(e.editForm,"amount",t)},expression:"editForm.amount"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{staticStyle:{width:"360px"},attrs:{label:"折扣",prop:"discount"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:25,disabled:""},model:{value:e.editForm.discount,callback:function(t){e.$set(e.editForm,"discount",t)},expression:"editForm.discount"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"门店"}},[r("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择",disabled:e.disabled2},on:{change:e.changeStore},model:{value:e.editForm.customerId,callback:function(t){e.$set(e.editForm,"customerId",t)},expression:"editForm.customerId"}},e._l(e.customerList,function(e){return r("el-option",{attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{staticStyle:{width:"360px"},attrs:{label:"微信号",prop:"wechat"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:55},model:{value:e.editForm.wechat,callback:function(t){e.$set(e.editForm,"wechat",t)},expression:"editForm.wechat"}})],1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入",maxlength:100},model:{value:e.editForm.remark,callback:function(t){e.$set(e.editForm,"remark",t)},expression:"editForm.remark"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.saveLoading},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){return e.goBack()}}},[e._v("返回")])],1)],1)],1)],1)},[],!1,null,"64eb05d2",null);i.options.__file="editMember.vue";t.default=i.exports},wYhU:function(e,t,r){}}]);