(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{CYsy:function(t,e,i){"use strict";var a=i("yzdP");i.n(a).a},przw:function(t,e,i){"use strict";i.r(e);var a=i("TsPW"),r={name:"edit-out-stock-order",data:function(){return{tableData:null,typeBool:!1,logisticsInfo:!1,formLabelWidth:"80px",dialogFormVisible:!1,dialogTitle:"新增出库单明细",dialogForm:{standard:"",number:"",price:"",id:"",name:"",serialNo:"",productInfoId:"",type:1,category:"",model:""},id:"",saveLoading:!1,editForm:{name:"",dateTime:"",totalNumber:"",totalPrice:"",remark:"",salesOrderIds:[],logisticsNo:"",logisticsId:"",customerId:"",supplierId:"",company:"",type:1},rules:{name:[{required:!0,message:"请输入出库单名称",trigger:"blur"}],salesOrderIds:[{required:!0,message:"请选择店铺订单",trigger:"blur"}],dateTime:[{required:!0,message:"请选择出库日期",trigger:"blur"}]},headers:{sessionId:sessionStorage.getItem("sessionId")},purchaseList:[],LogisticsList:[],customerList:[],groupList:[],supplierList:[],param:{pageSize:-1},param2:{pid:""},param3:{pageSize:-1},param4:{content:"",pageSize:-1},param5:{pageSize:-1,status:1,type:1},param6:{content:"",pageSize:-1,status:1,type:2},standardParam:{type:"单位"},productList:[],content:"",standardDataDicList:[],consumetList:[],fixedList:[]}},methods:{changeFixed:function(t){var e;e=this.fixedList.find(function(e){return e.id===t}),this.dialogForm.name=e.name,this.dialogForm.serialNo=e.serialNo,this.dialogForm.model=e.model,this.dialogForm.category=e.category},changeConsume:function(t){var e;e=this.consumetList.find(function(e){return e.id===t}),this.dialogForm.name=e.name,this.dialogForm.serialNo=e.serialNo,this.dialogForm.model=e.model,this.dialogForm.category=e.category},getAjaxStandardDataDic:function(){var t=this;Object(a.He)(t.standardParam).then(function(e){if(200==e.status){var i=e.data;i&&i.length>0?t.standardDataDicList=i:t.standardDataDicList=[]}})},changeProduct:function(t){var e;e=this.productList.find(function(e){return e.id===t}),this.dialogForm.standard=e.standard,this.dialogForm.name=e.name,this.dialogForm.serialNo=e.serialNo},changeGroup:function(t){var e;e=this.groupList.find(function(e){return e.id===t}),this.dialogForm.standard=e.standard,this.dialogForm.name=e.name,this.dialogForm.serialNo=e.serialNo},changeSupplier:function(t){var e=this,i=setInterval(function(){if(e.supplierList&&e.supplierList.length>0){var a;(a=e.supplierList.find(function(e){return e.id===t})).content&&(e.content=a.content),clearInterval(i)}},100)},changeLogistics:function(t){var e;e=this.LogisticsList.find(function(e){return e.id===t}),this.editForm.phone=e.phone,this.editForm.company=e.company,this.editForm.contact=e.contact},getAjaxList:function(t){var e=this;Object(a.Fb)(e.param2).then(function(i){e.tableData=[];var a=i.data;if(a&&a.length>0){e.tableData=a;for(var r=0,s=0,o=0;o<e.tableData.length;o++)r+=e.tableData[o].price*e.tableData[o].number,s+=e.tableData[o].number;e.editForm.totalPrice=r,e.editForm.totalNumber=s,1==t&&e.requestClientInfo()}else e.tableData=[]})},requestClientInfo:function(){var t=this,e=this;Object(a.bc)({id:this.id}).then(function(i){if(t.logisticsInfo=!0,200==i.status){var a=i.data;a&&(e.editForm.name=a.name,e.editForm.dateTime=a.dateTime,e.editForm.totalNumber=a.totalNumber,e.editForm.totalPrice=a.totalPrice,e.editForm.remark=a.remark,e.editForm.salesOrderIds=a.salesOrderIds,e.editForm.logisticsId=a.logisticsId,a.logistics&&(e.editForm.plateNumber=a.logistics.plateNumber,e.editForm.contact=a.logistics.contact,e.editForm.phone=a.logistics.phone,e.editForm.company=a.logistics.company),e.editForm.logisticsNo=a.logisticsNo,e.editForm.supplierId=a.supplierId,a.supplierId&&e.changeSupplier(a.supplierId),e.editForm.type=a.type,e.editForm.customerId=a.customerId)}else t.$message({message:"请求异常",type:"error"})})},goBack:function(){this.$router.push({path:"/outStockOrder"})},submitForm:function(t){var e=this,i=this;this.$refs[t].validate(function(t){if(!t)return!1;i.saveLoading=!0;e.supplierList.find(function(t){return t.id===i.editForm.supplierId});var r={id:i.id,name:i.editForm.name,dateTime:i.editForm.dateTime,totalNumber:i.editForm.totalNumber,totalPrice:i.editForm.totalPrice,remark:i.editForm.remark,logisticsNo:i.editForm.logisticsNo,customerId:i.editForm.customerId,supplierId:i.editForm.supplierId,type:i.editForm.type,salesOrderIds:i.editForm.salesOrderIds.toString(),logisticsId:i.editForm.logisticsId.toString()};Object(a.gd)(r).then(function(t){e.$message({type:"success",message:"操作成功!",duration:300,onClose:function(){sessionStorage.setItem("outId",t.data.id),i.id=t.data.id,i.param2.pid=t.data.id,i.requestClientInfo(),i.getAjaxList(2),i.saveLoading=!1,i.typeBool=!0}})})})},getAjaxPList:function(){var t=this;Object(a.Hc)(t.param3).then(function(e){var i=e.data.items;i&&i.length>0?t.purchaseList=i:t.purchaseList=[]})},getAjaxLogisticsList:function(){var t=this;Object(a.Kd)(t.param4).then(function(e){var i=e.data.items;i&&i.length>0?t.LogisticsList=i:t.LogisticsList=[]})},getAjaxClient:function(){var t=this;Object(a.zd)(t.param).then(function(e){var i=e.data.items;i&&i.length>0?t.customerList=i:t.customerList=[]})},getAjaxProduct:function(){var t=this;Object(a.Sd)(t.param).then(function(e){if(200==e.status){var i=e.data.items;i&&i.length>0?t.productList=i:t.productList=[]}})},getAjaxGroup:function(){var t=this;Object(a.nd)().then(function(e){if(200==e.status){var i=e.data;i&&i.length>0?t.groupList=i:t.groupList=[]}})},getAjaxSupplier:function(){var t=this;Object(a.Wd)(t.param).then(function(e){var i=e.data.items;i&&i.length>0?t.supplierList=i:t.supplierList=[]})},getAjaxFixed:function(){var t=this;Object(a.yd)(t.param5).then(function(e){if(200==e.status){var i=e.data.items;i&&i.length>0?t.fixedList=i:t.fixedList=[]}})},getAjaxConsume:function(){var t=this;Object(a.yd)(t.param6).then(function(e){if(200==e.status){var i=e.data.items;i&&i.length>0?t.consumetList=i:t.consumetList=[]}})}},beforeMount:function(){this.getAjaxSupplier();var t=sessionStorage.getItem("outId");t&&(this.id=t,this.param2.pid=t,this.typeBool=!0,this.requestClientInfo(),this.getAjaxList(2)),this.getAjaxPList(),this.getAjaxProduct(),this.getAjaxLogisticsList(),this.getAjaxClient()}},s=(i("CYsy"),i("KHd+")),o=Object(s.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/outStockOrder"}}},[t._v("出库单管理")]),t._v(" "),i("el-breadcrumb-item",[t._v("详情")])],1),t._v(" "),i("div",{staticClass:"contentBody"},[i("el-form",{ref:"editForm",staticClass:"demo-ruleForm",attrs:{model:t.editForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{staticStyle:{"text-align":"right"}},[i("el-button",{on:{click:function(e){return t.goBack()}}},[t._v("返回")])],1),t._v(" "),i("el-form-item",{attrs:{label:"出库单名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"请输入",maxlength:15,disabled:""},model:{value:t.editForm.name,callback:function(e){t.$set(t.editForm,"name",e)},expression:"editForm.name"}})],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"出库类型",prop:"type"}},[i("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:t.editForm.type,callback:function(e){t.$set(t.editForm,"type",e)},expression:"editForm.type"}},[i("el-option",{attrs:{label:"门店订单",value:1}},[t._v("门店订单")]),t._v(" "),i("el-option",{attrs:{label:"自主配货",value:2}},[t._v("自主配货")])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"出库日期",prop:"dateTime"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd",disabled:""},model:{value:t.editForm.dateTime,callback:function(e){t.$set(t.editForm,"dateTime",e)},expression:"editForm.dateTime"}})],1)],1)],1),t._v(" "),1==t.editForm.type?i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"店铺订单",prop:"salesOrderIds"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:t.editForm.salesOrderIds,callback:function(e){t.$set(t.editForm,"salesOrderIds",e)},expression:"editForm.salesOrderIds"}},t._l(t.purchaseList,function(t){return i("el-option",{attrs:{label:t.name+" ["+t.customerName+"]",value:t.id}})}),1)],1):t._e(),t._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"总量"}},[i("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.totalNumber,callback:function(e){t.$set(t.editForm,"totalNumber",e)},expression:"editForm.totalNumber"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"物流单号"}},[i("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.logisticsNo,callback:function(e){t.$set(t.editForm,"logisticsNo",e)},expression:"editForm.logisticsNo"}})],1)],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{staticStyle:{width:"316px"},attrs:{label:" 物流车牌号"}},[i("el-select",{attrs:{placeholder:"请选择",disabled:""},on:{change:t.changeLogistics},model:{value:t.editForm.logisticsId,callback:function(e){t.$set(t.editForm,"logisticsId",e)},expression:"editForm.logisticsId"}},t._l(t.LogisticsList,function(t){return i("el-option",{attrs:{label:t.plateNumber,value:t.id}})}),1)],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[t.editForm.phone?i("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"物流电话"}},[i("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.phone,callback:function(e){t.$set(t.editForm,"phone",e)},expression:"editForm.phone"}})],1):t._e()],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[t.editForm.company?i("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"物流公司名称"}},[i("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.company,callback:function(e){t.$set(t.editForm,"company",e)},expression:"editForm.company"}})],1):t._e()],1),t._v(" "),i("el-col",{attrs:{span:8}},[t.editForm.contact?i("el-form-item",{staticStyle:{width:"316px"},attrs:{label:"物流联系人"}},[i("el-input",{attrs:{placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.contact,callback:function(e){t.$set(t.editForm,"contact",e)},expression:"editForm.contact"}})],1):t._e()],1)],1),t._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[2==t.editForm.type?i("el-form-item",{attrs:{label:"门店",prop:"customerId"}},[i("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:t.editForm.customerId,callback:function(e){t.$set(t.editForm,"customerId",e)},expression:"editForm.customerId"}},t._l(t.customerList,function(t){return i("el-option",{attrs:{label:t.name,value:t.id}})}),1)],1):t._e()],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"供应商",prop:"supplierId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},on:{change:t.changeSupplier},model:{value:t.editForm.supplierId,callback:function(e){t.$set(t.editForm,"supplierId",e)},expression:"editForm.supplierId"}},t._l(t.supplierList,function(t){return i("el-option",{attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1),t._v(" "),t.editForm.supplierId?i("el-form-item",{attrs:{label:"供应内容"}},[i("el-input",{attrs:{disabled:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入",maxlength:200,disabled:""},model:{value:t.editForm.remark,callback:function(e){t.$set(t.editForm,"remark",e)},expression:"editForm.remark"}})],1)],1),t._v(" "),t.id?i("div",{staticClass:"contentBody"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{align:"center","header-align":"center",type:"index",label:"序号",width:"80"}}),t._v(" "),i("el-table-column",{attrs:{align:"center","header-align":"center",prop:"serialNo",label:"编号"}}),t._v(" "),i("el-table-column",{attrs:{align:"center","header-align":"center",prop:"name",label:"名称"}}),t._v(" "),i("el-table-column",{attrs:{align:"center","header-align":"center",prop:"standard",label:"单位"}}),t._v(" "),i("el-table-column",{attrs:{align:"center","header-align":"center",prop:"number",label:"数量",width:"140"}})],1)],1):t._e()],1)],1)},[],!1,null,"08e804e6",null);o.options.__file="detailOutStockOrder.vue";e.default=o.exports},yzdP:function(t,e,i){}}]);